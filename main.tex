%!TeX TXS-program:bibliography = txs:///biber
\documentclass{article}
\usepackage[utf8]{inputenc}
\usepackage{booktabs, float, color, colortbl, graphicx, ragged2e, setspace, threeparttablex, threeparttable, longtable, placeins, booktabs, float, tabularx}
\usepackage[english]{babel}
\usepackage{adjustbox}
\usepackage{acronym}
\usepackage{csquotes}
\usepackage[plainpages=false]{hyperref}
\usepackage{todonotes}

\hypersetup{%
	%backref=true,%
    plainpages=false,%
	naturalnames=true,%
	bookmarksnumbered=true,%
	bookmarksopen=false,%
	plainpages=true,%
	colorlinks=true,%
	urlcolor=black,
	linkcolor=black,%
	filecolor=black,%
	citecolor=black,%
	%pagecolor=myblue,%
	%pdftitle={\mytitle},%
	pdfpagemode=UseOutlines%
	%pdfauthor={\myauthors},%
	%pdfsubject={\myshorttitle}
}
\usepackage[natbib]{biblatex}

% bibliography
\addbibresource{paper.bib}

\acrodef{CDER}{Canadian Center for Data Development and Economic Research}
\acrodef{PEI}{Prince Edward Island}

\newcommand{\sym}[1]{\rlap{#1}}
\title{Synthetic Data for Canadian LEAP}
\author{M. Jahangir Alam, Benoit Dostie, Lars Vilhuber}
\begin{document}
\maketitle
\setstretch{1.5}
\begin{abstract}
\noindent
Statistics Canada collects data and creates databases based on administrative records on business establishments and enterprises, however, they only disseminate those business databases in highly aggregated forms. Since it is costly and inconvenient for researchers to get access to Canadian micro business databases, in this project, we implement the algorithm of the U.S. synthetic database for Longitudinal Business Database (LBD) to create the Canadian synthetic database for the Longitudinal Employment Analysis Program (LEAP). This Canadian synthetic database supports analytical validity for a wide range of statistical analyses which frequently use in the literature as well as provide evidence on confidentiality properties.

\end{abstract}
\newpage
\tableofcontents
\newpage
\section{Introduction}
Statistics Canada collects data and creates databases based on administrative records (like T4 slip that is the annual statements of remuneration paid) on business establishments and enterprises, however, they only disseminate those business databases in highly aggregated forms into two-digit industry categories. The \acf{CDER} in Statistics Canada is responsible to protect the confidentiality of business data. \ac{CDER} does not disseminate those business databases for two reasons. First, a confidentiality breach related to the business database is potentially more damaging to the statistical system because of the importance of key respondents that are more likely to be identifiable, e.g. Bombardier inc., a company mainly specializing in air and railway technology or Cavendish farm in \ac{PEI}. Second, the financial gains related to identifying a respondent are potentially greater, for example, people could make a profit by in investing stock markets through identifying Bombardier Inc.  

To give access to business databases, CDER currently uses three measures in place to mitigate the higher risk to the statistical system when business microdata are accessed. First, a batch-submit system is used when accessing the actual data. Second, actual individual observations cannot be accessed without it being recorded. Third, ``CDER version of synthetic data'' is also provided to aid with programming. 

Since it is costly and inconvenient for both researchers and Statistics Canada to get access to business databases, in this project, we create synthetic data\footnote{Synthetic data are created by replacing sensitive values with repeated draws from a model fit to the original data (Little, 1993; Rubin, 1993). This approach is closely related to multiple imputations.} for Canadian LEAP database during the period of 1991 to 2014 using 2015 LEAP vintage. In this project, we have three objectives: i) evaluate to what extent synthetic code developed for the U.S. Longitudinal Business Database (LBD) can easily transferable to LEAP database with comparable structure; ii) examine whether the automated synthesis will generate useful datasets that offer analytical validity for a wide range of statistical analyses; iii) provide evidence on confidentiality properties. 

Synthetic code developed for the U.S. LBD can easily transferable to Canadian LEAP database with comparable structure, however, there are some issues raised to implement that the U.S. synthetic code in Canadian LEAP database. First, the U.S. synthetic LBD code does not converse for a group of industries for each time of implementation. Second, the U.S. synthetic LBD code does not properly approximate the last year information of firms. Third, the U.S. synthetic LBD code generates, in some cases, zero employment or payroll during the life cycles of firms.   

Canadian synthetic database generates analytical validity for a wide range of statistical analysis which commonly uses in the literature. For example, we find that firm characteristics (gross employment, total payroll, the share of firms, the share of employment, the share of payroll) in the Canada synthetic data are very close to those in the LEAP, however, the manufacturing sector shows more close pattern than the private sector.  In addition, we compare firm dynamics (entry and exit rates) and dynamics of job flows (job creation rate, and net job creation rate) between Canadian synthetic and LEAP database and find that those firm dynamics are similar. Furthermore, we assess how well Canadian database captures variability in economic growth due to industry and firm age using several dynamic panel data models and find that Canadian synthetic database provides similar predictions to LEAP database. 

To provide evidence on confidentiality properties of Canadian synthetic database, we estimate the probability that the synthetic first year equals the true first year given the synthetic fist year and find that those probabilities are quite low except for the first year of LEAP database. This is because of censoring and lack of previous information. 


This paper is organized as follows. Section 2 includes a detailed description of the LEAP database and usages of LEAP database. Section 3 provides a brief overview of the evolution of synthetic data and implementation in the Canadian context. In section 4, the analytical validity of synthetic database is discussed. Finally, this paper concludes in Section 5. In addition, it includes a description to include other variables in Canadian synthetic database as an extension. 

 




\section{Data Description}
\subsection{LEAP database}
The Longitudinal Employment Analysis Program (LEAP) is a database that contains annual employment information for each employer business in Canada. The LEAP covers incorporated and unincorporated businesses that issue at least one T4 slip--the annual statements of remuneration paid--in any given calendar year, but excludes self-employed individuals or partnerships where the participants do not draw salaries. The LEAP has the advantage of covering all sectors of the economy-though some of the information is more meaningful for the business sector than the public sector.

The LEAP is constructed using three sources of information: T4 administrative data received from Canada Revenue Agency, data from Statistics Canada's Business Register, and data from Statistics Canada's Survey of Employment, Payrolls and Hours (SEPH). In Canada, employing businesses are required to register with Canada Revenue Agency using the Business Number and issue to each of their employees a T4 slip that summarizes earnings received in the year. This process creates a link between the employee and the business through the Business Number. This link is the backbone of LEAP, and the reported payroll allows estimates of annual employment to be made. The payroll is converted to employment (called ALUs or Average Labour Units) using conversion factors derived from the SEPH. 
\begin{itemize}
\item \textbf{Longitudinal Business Register Identifier (LBRID):} This is the unique identifier assigned to each enterprise.  The LBRID tracks the enterprise across all years in which it has employees, for the period covered by the LEAP vintage. It is derived from the Business Register enterprise identifier (BRID).  For various administrative reasons, an enterprise's identifier in the Business Register may sometimes change from year to year.  This would lead to the appearance of false deaths and births in the LEAP file.  To avoid this, a system of Labour Tracking is used to track the movements of workers between firms.  This is used to detect false births and deaths and link firms by a common LBRID.  Labour tracking can lead to many different types of linkages between firms. The simplest would be a one-to-one linkage between a death and a birth record. For example, if a business changes from incorporated to limited business, the Business Register may remove the original business from the register and create a new one. In this case, the only action necessary is to assign a common LBRID to the two businesses over time. A more complex case would be a merger between two firms, where most employees from the previous two firms are at a new firm. Here, all three entities are given the same LBRID, and the past records of the two merged firms would be combined into a single record. The employment of the two firms is added together, and the current NAICS code for the new firm is assigned to the combined, synthetic past record. In other words, it would be as if the newly merged firm already existed in the past. Similarly, acquisitions and spinoffs lead to the combination of firms and the creation of synthetic records. 
\item \textbf{Industry:} The 4-digit North American Industrial Classification System (NAICS) code that is assigned to a firm nationally.  This is the most dominant NAICS code for firms that have activity in multiple industries. One of the characteristics of the LEAP is that the industry code for the most recent year that the firm is alive is pushed back in time, so that an enterprise has the same industry code each year within the same vintage.  
\item \textbf{Employment:} Employment of each firm is measured by its average labour units (ALUs). ALUs are the average employment an enterprise would have if it paid its workers the average annual earnings (AAE) of a typical worker in the enterprise's particular industry, province and enterprise size class. AAE are derived using information from the SEPH.
\item \textbf{Payroll:} Sum of payroll from all T4 slips issued by the enterprise.
\end{itemize}


\subsection{Usages of LEAP database}
Using the LEAP database, we could conduct several research projects. For example, firm characteristics, firm dynamics (firm exit and firm entry), dynamics of job flows (job creation and job destruction), employment growth, changes in gross employment and payroll by firm size and firm age and industry. In addition, we could look at the distribution of employment growth rates and the variability in economic growth due to industry and firm age. 


\section{Methodology}
\subsection{Overview of method}
Demand for firm-level data across countries and also within-country are increasing to study firm dynamics. For example,  \textcite{NBERc0480} use a cross-country dataset to study average post-entry behavior of young firms. \textcite{10.1257/aer.20141280} use the BDS to show the role of firm size in firm dynamics but also had access to the Synthetic LBD. However, due to limited access to firm-level data across countries and also within-country, it is difficult to identify the sources of the variation in firm dynamics across countries. To provide access to establishment data in the United States, \textcite{RePEc:bla:istatr:v:79:y:2011:i:3:p:362-384} describe an approach to release synthetic data for Longitudinal Business Database (LBD), which was created in the early 2000s (see \textcite{RePEc:cen:wpaper:02-17} for details). The variables currently in the LBD are industry, annual payroll, employment, geography, birth year, death year, and firm structure.    


Currently, there are two versions of the method to create the Synthetic database. The general approach to data synthesis is to generate a joint posterior predictive distribution of $Y|X$ where $Y$ are variables to be synthesized and $X$ are unsynthesized variables. In the Phase 1 version of the method to create synthetic data, variables are synthesized in a sequential fashion, generally categorical variables are processed first using a variant of Dirichlet-Multinomial and then continuous variables are synthesized using a normal linear regression model with kennel density-based transformation (\textcite{WOODCOCK20094228}). Phase 2 version has shifted to a Classification and Regression Trees (CART) model with Bayesian bootstrap. For the United States, the phase 2 version  is currently in its final stages (\textcite{RePEc:cen:wpaper:14-12}). To evaluate whether synthetic data algorithms developed in the United States can easily be transferred to generate a similar synthetic data for other countries, \textcite{RePEc:cen:wpaper:14-13} implement the Phase 1 version of the method to the German Longitudinal Business Database (GLBD). 



\subsection{Implementation in the Canadian context}
To create a  Canadian synthetic database, we use the 2015 LEAP vintage. As for the U.S. synthetic database for LBD, we synthesize categorical variables first, followed by continuous variables, controlling for the firm ID and the industry classification at 4-digit NAICS (see Table~\ref{tab:LEAP_Variable}.)
% Table tab:LEAP_Variable
\input{tables/table_vardescription}

After implementing the U.S. synthetic LBD code, we follow four steps to create a Canadian synthetic database. First, we exclude the public sector (NAICS 61, 62, and 91) because Statistics Canada does not produce any statistics for this sector. Second, we exclude industries that are not converging for each time of implementation of the U.S. synthetic code for LBD. These industries are NAICS 4481,    4482,     4483,     4511,     4513,     4841,     4842,     5241, and 5242. Specifically, the SynLBD code does not converge around 7 percent observations as mentioned by ``not synthesized'' in Table \ref{Synthesized_observations}. Third, we drop some industries, from the synthesized industries, which have sensitiveness information. Finally, we drop last year observation for each firm since the SynLBD code does not properly approximate the last year data. After the implementation of these steps, we have around 22 million observations in the CanSynLBD database during the period of 1991 - 2014. 
\todo{Need to mention suppressed industries. Note presence of 0000 industries. Discuss.}



\begin{table}[H]
  \centering
\begin{threeparttable}
  \caption{Synthesized observations}  \label{Synthesized_observations} \medskip
  \renewcommand{\arraystretch}{1}
  \begin{tabular}{l  c c }
    \toprule
    \textbf{Category}&\textbf{\# of Observations (millions)}&\textbf{Percentage}\\
    \midrule
\input{tables/Synthesized_observations}
   \bottomrule
  \end{tabular} 
\begin{tablenotes}
\small
\item Note: Not synthesized industries are NAICS 4481,    4482,     4483,     4511,     4513,     4841,     4842,     5241, and 5242. These industries are not converging for each time of implementation We drop industries, from the synthesized industries, which have sensitiveness information. We do not synthesize the public sector (NAICS 61, 62, and 91).
 \end{tablenotes}
 \end{threeparttable}
\end{table}

\newpage

\section{Analytical validity}
\subsection{Firm Characteristics}
The CanSynLBD and LEAP generally provide comparable inferences on aggregate means and correlations. For example, Figures \ref{GrossEmploymentPrivate} and \ref{GrossEmploymentManufacturing} show gross employment levels for each year in the CanSynLBD are very close to those in the LEAP, however, manufacturing sector shows more close pattern than private sector. We find a similar comparison for total payroll (Figures \ref{TotalPayrollPrivate} and  \ref{TotalPayrollManufacturing}) .\todo{Redo Graph \ref{GrossEmploymentPrivate} omitting the last year}

\todo{Why is manufacturing always below, but overall employment crosses? Which industries are driving that?}
\begin{figure} [H]
\centering
\caption{Gross employment level by year (private)} \label{GrossEmploymentPrivate}
\includegraphics[height=2.8in, width=.7\linewidth]{graphs/Gross_employment_level_by_year_private_bw.pdf} 
\begin{minipage}{0.85\textwidth}
{\footnotesize Note: $LEAP$ is the Longitudinal Employment Analysis Program and $CanSynLBD$ is the Canadian synthetic database based on LEAP. In this graph, we use 2015 vintage of LEAP for private sector and drop last year observation of each firm.  \par}
\end{minipage}
\end{figure}



\begin{figure} [H]
\centering
\caption{Gross employment level by year (manufacturing)} \label{GrossEmploymentManufacturing}
\includegraphics[height=2.8in, width=.7\linewidth]{graphs/Gross_employment_level_by_year_manufacturing_bw.pdf} 
\begin{minipage}{0.85\textwidth}
{\footnotesize Note: $LEAP$ is the Longitudinal Employment Analysis Program and $CanSynLBD$ is the Canadian synthetic database based on LEAP. In this graph, we use 2015 vintage of LEAP for manufacturing sector and drop last year observation of each firm. \par}
\end{minipage}
\end{figure}



\begin{figure} [H]
\centering
\caption{Total payroll by year (private)} \label{TotalPayrollPrivate}
\includegraphics[height=2.8in, width=.7\linewidth]{graphs/Total_payroll_by_year_private_bw.pdf} 
\begin{minipage}{0.85\textwidth}
{\footnotesize Note: $LEAP$ is the Longitudinal Employment Analysis Program and $CanSynLBD$ is the Canadian synthetic database based on LEAP. In this graph, we use 2015 vintage of LEAP for private sector and drop last year observation of each firm. \par}
\end{minipage}
\end{figure}
\begin{figure} [H]
\centering
\caption{Total payroll by year (manufacturing)} \label{TotalPayrollManufacturing}
\includegraphics[height=2.8in, width=.7\linewidth]{graphs/Total_payroll_by_year_manufacturing_bw.pdf} 
\begin{minipage}{0.85\textwidth}
{\footnotesize Note: $LEAP$ is the Longitudinal Employment Analysis Program and $CanSynLBD$ is the Canadian synthetic database based on LEAP. In this graph, we use 2015 vintage of LEAP for manufacturing sector and drop last year observation of each firm. \par}
\end{minipage}
\end{figure}

Figures \ref{FirmSharePrivate} and \ref{FirmShareManufacturing} plot the share of firms by two-digit industry and year for both CanSynLBD and LEAP database
and show that the shares cluster along the 45-degree line.

\begin{figure} [H]
\centering
\caption{Share of firms by NAICS two-digit and year (private)} \label{FirmSharePrivate}
\includegraphics[height=2.8in, width=.7\linewidth]{graphs/Share_of_firms_by_NAICS_two-digit_and_year_private_bw.pdf} 
\begin{minipage}{0.85\textwidth}
{\footnotesize Note: $LEAP$ is the Longitudinal Employment Analysis Program and $CanSynLBD$ is the Canadian synthetic database based on LEAP. In this graph, we use 2015 vintage of LEAP for private sector and drop last year observation of each firm. \par}
\end{minipage}
\end{figure}


\vspace{-15.5pt}
\begin{figure} [H]
\centering
\caption{Share of firms by NAICS two-digit and year (manufacturing)} \label{FirmShareManufacturing}
\includegraphics[height=2.8in, width=.7\linewidth]{graphs/Share_of_firms_by_NAICS_two-digit_and_year_Manufacturing_bw.pdf} 
\begin{minipage}{0.85\textwidth}
{\footnotesize Note: $LEAP$ is the Longitudinal Employment Analysis Program and $CanSynLBD$ is the Canadian synthetic database based on LEAP. In this graph, we use 2015 vintage of LEAP for manufacturing sector and drop last year observation of each firm. \par}
\end{minipage}
\end{figure}

Figures \ref{EmploymentSharePrivate} and \ref{EmploymentShareManufacturing} plot the share of employment by two-digit industry and year for both CanSynLBD and LEAP database
\footnote{$x_{its} = X_{its}/\sum_{i} \sum_{t} X_{its}$, where $i$ are two-digit NAICS industries, $t$ are the years in-sample, and $s$ indicates whether it is in the synthetic or confidential data. } and show that those shares do not cluster along the 45-degree line. However, the share of employment for manufacturing sector more cluster along the 45-degree line than private sector.
\begin{figure} [H]
\centering
\caption{Share of employment by NAICS two-digit and year (private)} \label{EmploymentSharePrivate}
\includegraphics[height=2.8in, width=.7\linewidth]{graphs/Share_of_employment_by_NAICS_two-digit_and_year_private_bw.pdf} 
\begin{minipage}{0.85\textwidth}
{\footnotesize Note: $LEAP$ is the Longitudinal Employment Analysis Program and $CanSynLBD$ is the Canadian synthetic database based on LEAP. In this graph, we use 2015 vintage of LEAP for private sector and drop last year observation of each firm. \par}
\end{minipage}
\end{figure}
\vspace{-15.5pt}
\begin{figure} [H]
\centering
\caption{Share of employment by NAICS two-digit and year (manufacturing)} \label{EmploymentShareManufacturing}
\includegraphics[height=2.8in, width=.7\linewidth]{graphs/Share_of_employment_by_NAICS_two-digit_and_year_Manufacturing_bw.pdf} 
\begin{minipage}{0.85\textwidth}
{\footnotesize Note: $LEAP$ is the Longitudinal Employment Analysis Program and $CanSynLBD$ is the Canadian synthetic database based on LEAP. In this graph, we use 2015 vintage of LEAP for manufacturing sector and drop last year observation of each firm. \par}
\end{minipage}
\end{figure}

Figures \ref{PayrollSharePrivate} and \ref{PayrollShareManufacturing} plot the share of payroll by two-digit industry and year for both CanSynLBD and LEAP database and show that those shares do not cluster along the 45-degree line. However, the share of payroll for manufacturing sector more cluster along the 45-degree line than private sector.
\begin{figure} [H]
\centering
\caption{Share of payroll by NAICS two-digit and year (private)} \label{PayrollSharePrivate}
\includegraphics[height=2.8in, width=.7\linewidth]{graphs/Share_of_payroll_by_NAICS_two-digit_and_year_private_bw.pdf} 
\begin{minipage}{0.85\textwidth}
{\footnotesize Note: $LEAP$ is the Longitudinal Employment Analysis Program and $CanSynLBD$ is the Canadian synthetic database based on LEAP. In this graph, we use 2015 vintage of LEAP for private sector and drop last year observation of each firm. \par}
\end{minipage}
\end{figure}
\vspace{-15.5pt}
\begin{figure} [H]
\centering
\caption{Share of payroll by NAICS two-digit and year (manufacturing)} \label{PayrollShareManufacturing}
\includegraphics[height=2.8in, width=.7\linewidth]{graphs/Share_of_payroll_by_NAICS_two-digit_and_year_Manufacturing_bw.pdf} 
\begin{minipage}{0.85\textwidth}
{\footnotesize Note: $LEAP$ is the Longitudinal Employment Analysis Program and $CanSynLBD$ is the Canadian synthetic database based on LEAP. In this graph, we use 2015 vintage of LEAP for manufacturing sector and drop last year observation of each firm. \par}
\end{minipage}
\end{figure}


\subsection{Firm Dynamics}
To assess how well the CanSynLBD captures firm dynamics, we calculate entry and exit rates of the private sector by year. Table \ref{FirmDynamics} shows that those rates for CanSynLBD are similar to LEAP database. In addition, we calculate the divergence of entry rate as the entry rate of CanSynLBD net the entry rate of LEAP and the divergence of exit rate as the exit rate of CanSynLBD net the exit rate of LEAP (see Table  \ref{FirmDynamics}).
\todo{LV Reformat table, compute divergence}

\begin{table}[H]
  \centering
\begin{threeparttable}
 \caption{Entry and exit rates by year} \label{FirmDynamics} \medskip
\renewcommand{\arraystretch}{1}
\begin{tabular}{l|c c| c c| c c}
\toprule
&\multicolumn{2}{c|}{\textbf{LEAP}} &  \multicolumn{2}{c|}{\textbf{CanSynLBD}}&  \multicolumn{2}{c}{\textbf{Divergence}}\\
\textbf{Year}&\textbf{Entry Rate}&\textbf{Exit Rate}&\textbf{Entry Rate}&\textbf{Exit Rate} &\textbf{Entry Rate}&\textbf{Exit Rate}\\
\midrule
\input{tables/Entry_and_exit_rate_by_year}
   \bottomrule
  \end{tabular} 
\begin{tablenotes}
\small
\item Note: $LEAP$ is the Longitudinal Employment Analysis Program and $CanSynLBD$ is the Canadian synthetic database based on LEAP. In this graph, we use 2015 vintage of LEAP for the manufacturing sector and drop last year observation of each firm. We calculate the divergence of entry rate as the entry rate of CanSynLBD net the entry rate of LEAP and the divergence of exit rate as the exit rate of CanSynLBD net the exit rate of LEAP.
 \end{tablenotes}
 \end{threeparttable}
\end{table}

\begin{figure} [H]
\centering
\caption{Divergence of exit and entry rate between LEAP and CanSynLBD} \label{Divergence}
\includegraphics[height=2.8in, width=.7\linewidth]{graphs/Divergence_of_exit_and_entry_rate_between_LEAP_and_CanSynLBD_bw.pdf} 
\begin{minipage}{0.85\textwidth}
{\footnotesize Note: $LEAP$ is the Longitudinal Employment Analysis Program and $CanSynLBD$ is the Canadian synthetic database based on LEAP. In this graph, we use 2015 vintage of LEAP for private sector and drop last year observation of each firm. We calculate the divergence of entry rate as the entry rate of CanSynLBD net the entry rate of LEAP and the divergence of exit rate as the exit rate of CanSynLBD net the exit rate of LEAP. \par}
\end{minipage}
\end{figure}


\subsection{Dynamics of Job Flows}
One of the most important applications of LEAP is to generate statistics that describe job flows. To measure job creation and job destruction, we follow the method developed by \cite{DavisHaltiwangerSchuh}. The job creation is the sum of all employment gains from expanding firms from year $t-1$ to year $t$ including entry firms and the job destruction is the sum of all employment losses from contracted firms from year $t-1$ to year $t$ including exiting firms. Net job creation is the job creation rate minus the job destruction rate. Figures \ref{JobCreationPrivate} and \ref{JobCreationManufacturing} show the job creation rates from the CanSynLBD and compares them against the LEAP. These figures show that the manufacturing sector has more close pattern than the private sector. We find a similar pattern for net job creation rates (Figures \ref{NetJobCreationPrivate} and  \ref{NetJobCreationManufacturing}).



\begin{figure} [H]
\centering
\caption{Job creation rate by year (private)} \label{JobCreationPrivate}
\includegraphics[height=2.8in, width=.7\linewidth]{graphs/Job_creation_rate_by_year_private_bw.pdf} 
\begin{minipage}{0.85\textwidth}
{\footnotesize Note: $LEAP$ is the Longitudinal Employment Analysis Program and $CanSynLBD$ is the Canadian synthetic database based on LEAP. In this graph, we use 2015 vintage of LEAP for the private sector and drop last year observation of each firm. \par}
\end{minipage}
\end{figure}
\begin{figure} [H]
\centering
\caption{Job creation rate  by year (manufacturing)} \label{JobCreationManufacturing}
\includegraphics[height=2.8in, width=.7\linewidth]{graphs/Job_creation_rate_by_year_Manufacturing_bw.pdf} 
\begin{minipage}{0.85\textwidth}
{\footnotesize Note: $LEAP$ is the Longitudinal Employment Analysis Program and $CanSynLBD$ is the Canadian synthetic database based on LEAP. In this graph, we use 2015 vintage of LEAP for the manufacturing sector and drop last year observation of each firm. \par}
\end{minipage}
\end{figure}

\todo{LV regraph, dropping last year (net job creation not defined)}
\begin{figure} [H]
\centering
\caption{Net job creation rate by year (private)} \label{NetJobCreationPrivate}
\includegraphics[height=2.8in, width=.7\linewidth]{graphs/Net_job_creation_rate_by_year_private_bw.pdf} 
\begin{minipage}{0.85\textwidth}
{\footnotesize Note: $LEAP$ is the Longitudinal Employment Analysis Program and $CanSynLBD$ is the Canadian synthetic database based on LEAP. In this graph, we use 2015 vintage of LEAP for the private sector and drop last year observation of each firm. \par}
\end{minipage}
\end{figure}
\begin{figure} [H]
\centering
\caption{Net job creation rate  by year (manufacturing)} \label{NetJobCreationManufacturing}
\includegraphics[height=2.8in, width=.7\linewidth]{graphs/Net_job_creation_rate_by_year_Manufacturing_bw.pdf} 
\begin{minipage}{0.85\textwidth}
{\footnotesize Note: $LEAP$ is the Longitudinal Employment Analysis Program and $CanSynLBD$ is the Canadian synthetic database based on LEAP. In this graph, we use 2015 vintage of LEAP for the manufacturing sector and drop last year observation of each firm. \par}
\end{minipage}
\end{figure}




\subsection{pMSE}
To compare the quality of the synthetic data relative to the confidential data, we compute $pMSE$, which is the mean-squared error of the predicted probabilities (i.e., propensity scores) for those two databases. Specifically, $pMSE$ is a metric to assess how well we are able to discern between synthetic data and confidential data. This means that these two databases have high distributional similar if we are unable to discern. 

We follow the method by \textcite{SnokeSlavkovic2018} to calculate the $pMSE$. Here is the steps we follow to calculate the $pMSE$. 

\begin{enumerate}
    \item append the $n_1$ rows of the confidential database $X$ to the $n_2$ rows of the synthetic database $X^s$ to create $X^{comb}$ with $N=n_1 + n_2$ rows
    \item create an indicator variable, $I$, to $X^{comb}$ subject to $I=\{1: X^{comb} \in X^s\}$. This means that we create an indicator variable of $1$ for the synthetic database and $0$ for the confidential database. 
    \item fit the following model to predict $I$
    \begin{eqnarray}	
I &=&\alpha +ALU_{it}+\lambda Pay_{it}+Age_{it}^{T}\beta+\lambda_t+\alpha_s+\epsilon_{it} \label{pMSE}
\end{eqnarray}
where $ALU_{it}$ is the logarithm of average labour unit (ALU) of firm $i$ in year $t$, $Pay_{it}$ is the logarithm of payroll of firm $i$ in year $t$, $Age_{it}$ is a vector of dummy variables for age of firm $i$ in year $t$, $\lambda_t$ is the year fixed effect, $\alpha_s$ is an unobserved time-invariant industry-specific effect, and $\epsilon_{it}$ is the disturbance term of firm $i$ in year $t$. 
    \item calculate the predicted probabilities, $\hat{p}_i$ for each row of $X^{comb}$
    \item compute the $pMSE=\frac{1}{N}\sum_{i=1}^N(\hat{p}_i - 0.5)^2$
\end{enumerate}
A $pMSE$ = 0 means every $\hat{p}_i = 0.5$. This implies the highest utility. 

To compute the $pMSE$, we estimate the regression equation \ref{pMSE} using both Logistic Regression and Probit Regression. Table \ref{pMSE_regression} shows the calculated value of $pMSE$, which is lower for the manufacturing sector than the public sector in both regressions. This is because, as we explained before, the manufacturing sector shows more close pattern than the private sector.

\begin{table}[H]
  \centering
\begin{threeparttable}
 \caption{pMSE estimates} \label{pMSE_regression} \medskip
\renewcommand{\arraystretch}{1}
\begin{tabular}{l|c c| c c}
\toprule
\textbf{Independent Variables}&\multicolumn{2}{c|}{\textbf{Logistic Regression}} &  \multicolumn{2}{c}{\textbf{Probit Regression}}\\
\midrule
\input{tables/pMSE_estimates}
   \bottomrule
  \end{tabular} 
\begin{tablenotes}
\small
\item Note: An observation is a firm and a year of both synthetic and original databases. In all specifications, we include both time and industry fixed effects. Standard errors are in parentheses. In this table, we use 2015 vintage of LEAP to create the synthetic database and drop last year observation of each firm. ***, **, and * indicate statistically significant coefficients at 1\%, 5\%, and 10\% percent levels, respectively.
 \end{tablenotes}
 \end{threeparttable}
\end{table}


\subsection{Regression Analysis}
To assess how well the CanSynLBD captures variability in economic growth due to industry and firm age, we estimate the following dynamic panel data model:
\begin{eqnarray}	
ALU_{it}&=&\alpha +\theta ALU_{i,t-1}+\lambda Pay_{it}+Age_{it}^{T}\beta+\lambda_t+\alpha_s+\epsilon_{it}
\end{eqnarray}
where $ALU_{it}$ is the logarithm of average labour unit (ALU) of firm $i$ in year $t$, $ALU_{i,t-1}$ is the logarithm of last year's average labour unit (ALU) of firm $i$, $Pay_{it}$ is the logarithm of payroll of firm $i$ in year $t$, $Age_{it}$ is a vector of dummy variables for age of firm $i$ in year $t$, $\lambda_t$ is the year fixed effect, $\alpha_s$ is an unobserved time-invariant industry-specific effect, and $\epsilon_{it}$ is the disturbance term of firm $i$ in year $t$. 


\begin{table}[H]
  \centering
\begin{threeparttable}
 \caption{Regression coefficients (OLS)} \label{OLS} \medskip
\renewcommand{\arraystretch}{1}
\begin{tabular}{l|c c| c c}
\toprule
\textbf{Independent Variables}&\multicolumn{2}{c|}{\textbf{LEAP}} &  \multicolumn{2}{c}{\textbf{CanSynLBD}}\\
\midrule
\input{tables/Regression_coefficients_OLS}
   \bottomrule
  \end{tabular} 
\begin{tablenotes}
\small
\item Note: An observation is a firm and a year. In all specifications, we include both time and industry fixed effects. Standard errors are in parentheses. $LEAP$ is the Longitudinal Employment Analysis Program and $CanSynLBD$ is the Canadian synthetic database based on LEAP. In this table, we use 2015 vintage of LEAP and drop last year observation of each firm. ***, **, and * indicate statistically significant coefficients at 1\%, 5\%, and 10\% percent levels, respectively.
 \end{tablenotes}
 \end{threeparttable}
\end{table}

We estimate the model separately on LEAP and CanSynLBD database for the private and manufacturing sector and find that the CansynLBD database provides similar predictions to LEAP database (Tables  \ref{OLS}).\todo{compute overlap interval}




\begin{table}[H]
  \centering
\begin{threeparttable}
 \caption{Regression coefficients (Dynamic)} \label{Dynamic - GMM} \medskip
\renewcommand{\arraystretch}{1}
\begin{tabular}{l|c c| c c}
\toprule
\textbf{Independent Variables}&\multicolumn{2}{c|}{\textbf{LEAP}} &  \multicolumn{2}{c}{\textbf{CanSynLBD}}\\
\midrule
\input{tables/Regression_coefficients_Dynamic_GMM}
   \bottomrule
  \end{tabular} 
\begin{tablenotes}
\small
\item Note: An observation is a firm and a year. In this table, $m2$ is the Arellano-Bond test for zero autocorrelation in first-differenced errors for order two. $LEAP$ is the Longitudinal Employment Analysis Program and $CanSynLBD$ is the Canadian synthetic database based on LEAP. In this graph, we use 2015 vintage of LEAP and drop last year observation of each firm. Standard errors are in parentheses. ***, **, and * indicate statistically significant coefficients at 1\%, 5\%, and 10\% percent levels, respectively.
 \end{tablenotes}
 \end{threeparttable}
\end{table}

As $ALU_{st-1}$ is correlated with $\alpha_{s}$ because $ALU_{st-1}$ is a function of $\alpha_{s}$, OLS estimators are biased and inconsistent. Due to this endogeneity, we estimate this model using the method in \textcite{RePEc:oup:restud:v:58:y:1991:i:2:p:277-297.} and find similar prediction (Table \ref{Dynamic - GMM}). To check the validity of the model, I use two tests. First, to test for autocorrelation, I use the test $m2$ by \textcite{RePEc:oup:restud:v:58:y:1991:i:2:p:277-297.}.  In the table, I report $z$ test statistic for $m2$ test for zero autocorrelation in first-differenced errors for order two. Second, I use the Sargan test to verify the validity of instrument subsets (shows in the last three rows in the table).

We furthermore estimate the model using the system GMM  method proposed by \textcite{RePEc:eee:econom:v:68:y:1995:i:1:p:29-51} and \textcite{RePEc:eee:econom:v:87:y:1998:i:1:p:115-143} and find similar predictions as before (Table \ref{Dynamic - system GMM}). 




\begin{table}[H]
  \centering
\begin{threeparttable}
 \caption{Regression coefficients (Dynamic - system GMM)} \label{Dynamic - system GMM} \medskip
\renewcommand{\arraystretch}{1}
\begin{tabular}{l|c c| c c}
\toprule
\textbf{Independent Variables}&\multicolumn{2}{c|}{\textbf{LEAP}} &  \multicolumn{2}{c}{\textbf{CanSynLBD}}\\
\midrule
\input{tables/Regression_coefficients_Dynamic_System_GMM}
   \bottomrule
  \end{tabular} 
\begin{tablenotes}
\small
\item Note: An observation is a firm and a year. In this table, $m2$ is the Arellano-Bond test for zero autocorrelation in first-differenced errors for order two. $LEAP$ is the Longitudinal Employment Analysis Program and $CanSynLBD$ is the Canadian synthetic database based on LEAP. In this table, we use 2015 vintage of LEAP and drop last year observation of each firm. Standard errors are in parentheses. ***, **, and * indicate statistically significant coefficients at 1\%, 5\%, and 10\% percent levels, respectively.
 \end{tablenotes}
 \end{threeparttable}
\end{table}

We also estimate above dynamic panel data model with a first-order moving average using appropriate instruments for both level and difference equation as proposed by \textcite{RePEc:eee:econom:v:68:y:1995:i:1:p:29-51} and \textcite{RePEc:eee:econom:v:87:y:1998:i:1:p:115-143}:
\begin{eqnarray}	
ALU_{it}&=&\alpha +\theta ALU_{i,t-1}+\lambda Pay_{it}+Age_{it}^{T}\beta+\lambda_t+\alpha_s+\epsilon_{it}+\gamma\epsilon_{it-1}
\end{eqnarray}


Table \ref{Dynamic - system GMM with MA(1)} shows that the CansynLBD provides similar predictions to LEAP database.

\begin{table}[H]
  \centering
\begin{threeparttable}
 \caption{Regression coefficients (Dynamic - system GMM with MA(1))} \label{Dynamic - system GMM with MA(1)} \medskip
\renewcommand{\arraystretch}{1}
\begin{tabular}{l|c c| c c}
\toprule
\textbf{Independent Variables}&\multicolumn{2}{c|}{\textbf{LEAP}} &  \multicolumn{2}{c}{\textbf{CanSynLBD}}\\
\midrule
\input{tables/Regression_coefficients_Dynamic_System_GMM_MA}
   \bottomrule
  \end{tabular} 
\begin{tablenotes}
\small
\item Note: An observation is a firm and a year. In this table, $m2$ is the Arellano-Bond test for zero autocorrelation in first-differenced errors for order two. $LEAP$ is the Longitudinal Employment Analysis Program and $CanSynLBD$ is the Canadian synthetic database based on LEAP. In this table, we use 2015 vintage of LEAP and drop last year observation of each firm. Standard errors are in parentheses. ***, **, and * indicate statistically significant coefficients at 1\%, 5\%, and 10\% percent levels, respectively.
 \end{tablenotes}
 \end{threeparttable}
\end{table}

\newpage
\subsection{Confidentiality protection}
In this section, we estimate the probability that the synthetic first year equals the true first year, given the synthetic first year. Tables \ref{ProbabilityPrivate} and \ref{ProbabilityManufacturing} show that these probabilities are quite low except for the first year. This is because of censoring and lack of previous information.

\begin{table}[H]
\centering\footnotesize
\caption{Observed firm births given synthetic births (private)} \label{ProbabilityPrivate} \medskip
\renewcommand{\arraystretch}{1}
\begin{tabular}{c c| c c c}
\toprule
\multicolumn{2}{c|}{\textbf{First (Birth) Year}} &  \multicolumn{3}{c}{\textbf{\% of Births over NAICS}}\\
\textbf{Synthetic}&\textbf{Actual}&\textbf{Minimum}&\textbf{Mean}&\textbf{Maximum}\\
\midrule
\input{tables/Observed_firm_births_given_synthetic_births_private}
\bottomrule
\end{tabular} 
\\
\justify
Note:
\end{table}

\begin{table}[H]
\centering\footnotesize
\caption{Observed firm births given synthetic births (manufacturing)} \label{ProbabilityManufacturing} \medskip
\renewcommand{\arraystretch}{1}
\begin{tabular}{c c| c c c}
\toprule
\multicolumn{2}{c|}{\textbf{First (Birth) Year}} &  \multicolumn{3}{c}{\textbf{\% of Births over NAICS}}\\
\textbf{Synthetic}&\textbf{Actual}&\textbf{Minimum}&\textbf{Mean}&\textbf{Maximum}\\
\midrule
\input{tables/Observed_firm_births_given_synthetic_births_manufacturing}
\bottomrule
\end{tabular} 
\\
\justify
Note:
\end{table}



\begin{figure} [H]
\centering
\caption{The difference between first and last year given synthetic first year} \label{SyntheticFirstYear}
\includegraphics[height=2.8in, width=.7\linewidth]{graphs/The_difference_between_first_and_last_year_given_synthetic_first_year_bw.pdf} 
\begin{minipage}{0.85\textwidth}
{\footnotesize Note:  \par}
\end{minipage}
\end{figure}



\section{Conclusion and Extensions}
Statistics Canada disseminates business data in highly aggregated forms. To get access to Canadian micro business databases, in this paper, we implement the algorithm of the U.S. synthetic data for LBD to create Canadian synthetic data for LEAP. This Canadian synthetic database supports analytical validity for a wide range of statistical analyses as well as provide evidence on confidentiality properties.

\subsection{Addition of variables that are not analytically valid}
\subsection{Addition of analytically valid variables}
Capital stock or revenue for incorporated 

\newpage
\appendix{Supplementary Graphs}
\section{Analytical validity}

\subsection{Confidence interval for gross employment and other measures}
We compute the standard error for gross employment as follows. We consider gross employment $E$ to be the sum of firm employments $E_j$:

\begin{equation}
E = \sum_j E_j
\end{equation}

Average firm employment $\bar{E} = \frac{E}{N_j}$ is assumed to be normally distributed, with standard deviation $\sigma_{\bar{E}}$. We compare the synthetic and the confidential data for gross employment, including error bands.

\subsection{Confidence interval overlap measures}

More generally, the question as to the statistical precision of the results obtained from the synthetic data can be assessed. For this purpose, we computed the overlap of parameter estimates  as suggested by \cite{tas2006}. We compute  the \emph{interval 
	overlap measure} $J_{k,m}$ for parameter $k$ in model $m$. Consider the overlap of confidence intervals $(L,U)$ for $\beta_{k,m}$ (estimated from the confidential data) and $(L^{*},U^{*})$ for $\beta_{k,m}^*$ (from the synthetic data). Let $L^{over} = \max (L,L^{*} )$ and $U^{over} = \min (U,U^{*})$. Then the average overlap in confidence intervals is

$$
J_{k,m}^{*} = \frac{1}{2} \left [ \frac{U^{over} - L^{over}}{U-L} + \frac{U^{over} - L^{over}}{U^*-L ^*}        \right ]
$$
We then average $J_{k,m}^{*}$ over all estimated models and parameters, by validation request. The correct counterfactual is running these validation requests against synthetic data that does not claim analytical validity, such as synthetic data generated from unidimensional distributions of variables. Results are pending.



\subsection{Other models}

Possible papers:
\begin{itemize}
\item \textcite{10.1257/aer.20141280} use the BDS to show the role of firm size in firm dynamics, but also had access to the Synthetic LBD.
\item \textcite{NBERc0480} use a cross-country dataset to study average post-entry behavior of young firms. 
\end{itemize}

%\bibliographystyle{apalike}
%\bibliography{paper}
\printbibliography

\end{document}
