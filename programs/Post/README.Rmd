---
title: "README"
author: "Lars Vilhuber"
date: "2/15/2020"
output: 
  html_document: 
    keep_md: yes
    number_sections: yes
    toc: yes
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
source(here::here("programs","Post","config.R"),echo=TRUE)
library(knitr)
```

# Data Availability Statement

The key data sources used in the article are described and cited in the article. 

## LEAP

The Canadian LEAP is accessible at CRDE. Access requests can be made at (URL). Applicants need to be Canadian residents, and a security check is conducted. Access is only at Statistics Canada offices in Ottawa.

## BHP

The version of the BHP we used is an internal version, accessible only to IAB employees and their collaborators. A 50% sample is accessible to external researchers through the FDZ (Research Data Center) of the IAB. Applicants must fill out a form, subject to approval, and can access the data via the various access mechanisms of the FDZ, including physical locations in Germany, elsewhere in Europe, and North America.

## Synthetic data

Synthetic data from both confidential data were never released to the public, and are accessible only via the same access mechanisms as above. A related synthetic LEAP was made available through the Canadian Research Data Center system, as part of a pilot program, to prepare access to the confidential data. We are not aware of current access. The outcomes of the pilot program have not been made documented yet.

## Analytic outcomes

The analytic outcomes described in the article were released through the respective disclosure avoidance mechanisms, subject to disclosure avoidance procedures of each statistical institution. This outcomes, as figures, CSV files, and others, are available in this repository. Some were extracted from figures or released tables by the programs in this directory.

> NEED TO CLEAN THIS UP

```{r listfiles,echo=FALSE}
list.files(datadir) %>% kable(col.names = c("Name"))
```




## NAICS data

As a small part of the post-processing, we count the (theoretical) number of Canadian NAICS industry groups (Statistics Canada, 2012). The file can be downloaded from [https://www.statcan.gc.ca/eng/subjects/standard/naics/2012/index](https://www.statcan.gc.ca/eng/subjects/standard/naics/2012/index).

```{r describe_naics, echo=FALSE}
infile <- "NAICS-SCIAN-2012-Structure-eng.csv"
naics.can <- read_csv(file.path(datadir,infile))
summary(naics.can) %>% kable()
```

# Programs


## Requirements

- R
- Stata
- bash shell (optional, to execute all programs in order)

## Synthetic generation

The software used to generate the synthetic data is described in Kinney et al (2011b). A copy of the code as used for the Canadian data is provided in the `programs/Canada` directory.

## Post-processing

The following programs are used to post-process the analytic results:

### Stata programs

```{r list_programs_do,echo=FALSE}
list.files(".","*do") %>% kable(col.names = c("Name"))
```

### R programs

```{r list_programs,echo=FALSE}
list.files(".","*.R$") %>% kable(col.names = c("Name"))
```

### Execution of programs

Numbered programs should be executed in the natural order. Other programs define locations and/or subroutines, and should not be executed. A convenience bash script `run_all.sh` is provided.



